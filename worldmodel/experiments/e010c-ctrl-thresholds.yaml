# E010c: Derived threshold features (deadzone-aware ctrl)
# Hypothesis: pre-computing Melee's movement thresholds (walk ~0.2875, dash ~0.79)
# as binary features eliminates the "learn thresholds from continuous values" problem.
# 5 features per player: in_deadzone, walk_zone, dash_zone, x_sign, stick_y_up.
# Computed on-the-fly in forward() from raw stick values â€” no dataset changes.
# Base: E009a (K=10, v3, focal_offset=3, multi_position=true)

data:
  dataset_dir: null
  max_games: 2000

encoding:
  state_age_as_embed: true
  state_age_embed_vocab: 150
  state_age_embed_dim: 8
  press_events: false
  lookahead: 0
  focal_offset: 3
  multi_position: true
  projectiles: false
  state_flags: true
  hitstun: true
  ctrl_threshold_features: true

model:
  arch: mamba2
  context_len: 10
  d_model: 384
  d_state: 64
  n_layers: 4
  headdim: 64
  dropout: 0.1
  chunk_size: 10

training:
  lr: 0.0005
  weight_decay: 0.00001
  batch_size: 4096
  num_epochs: 2
  train_split: 0.9
  log_interval: 1000

loss_weights:
  continuous: 1.0
  velocity: 0.5
  dynamics: 0.5
  binary: 1.0
  action: 2.0
  jumps: 0.5
  l_cancel: 0.3
  hurtbox: 0.3
  ground: 0.3
  last_attack: 0.3

save_dir: checkpoints/e010c-ctrl-thresholds
